<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PyLith Parameters Viewer</title>
  </head>
  <body>
    <h1>PyLith Parameter Viewer</h1>

    <p>
      The PyLith Parameter Viewer provides a graphical user interface for
      viewing the parameters associated with a PyLith simulation and the
      version information for PyLith and its dependencies. This viewer is an
      updated and interactive interface to the information generated by the
      <tt>pylithinfo</tt> script. It displays the hiearchy of components and the
      parameters for each one, including default values.
    </p>

    <h2>Loading Parameters</h2>

    <p>
      The steps to run the parameter viewer are:
      <ol>
	<li>Generate the parameter JSON file.</li>
	<li>Start the web server (if not already running).</li>
	<li>Load the parameter JSON file.</li>
      </ol>
    </p>

    <h3>Generate the parameter JSON file</h3>

    <p>
      The parameter viewer uses a JSON file with all of the parameters
      collected from <tt>.cfg</tt> files, command line arguments, etc
      as input. This file can be generated using <tt>pylithinfo</tt>
      and, by default, it will be generated whenever a <tt>pylith</tt>
      simulation is run. When using <tt>pylithinfo</tt>, the name of
      the parameter file can be set via a command line argument. When
      using <tt>pylith</tt>, the <tt>DumpParametersJSON</tt> component
      contains a property for the name of the file. You can set the
      filename on the command line
      </p>
    <pre><code>
$$ pylith --dump_parameters.filename=FILENAME.json
    </code></pre>
    <p>or within a .cfg file</p>
    <pre><code>
[pylithapp.dump_parameters]
filename = FILENAME.json
    </code></pre>
    <p>
      Currently, the JSON parameter file cannot be used in place of a
      <tt>.cfg</tt> file to run a PyLith simulation. This feature will
      be added in an upcoming release.
    </p>
    
    <h3>Load the application</h3>

    <h4>Online version</h4>

    <p>
      Point your web browser
      to <a href="https://geodynamics.github.io/pylith_parameters"
	    >https://geodynamics.github.io/pylith_parameters</a>.
    </p>

    <h4>Local (offline) version</h4>

    <p>
      Change to the directory containing
      the <tt>pylith_paramviewer</tt> script (usually
      the <tt>parametersgui</tt> directory under the top-level
      <tt>pylith</tt> directory), and run the <tt>pylith_paramviewer</tt>
      script. This will start a simple Python-based web server on your local
      computer.
    </p>
    <pre><code>
$$ cd parametersgui
$$ ./pylith_paramviewer
    </code></pre>
    <p>
      The script will instruct you to point your web browswer to a
      local port on your computer. The default
      is <a href="http://127.0.0.1:9000">http://127.0.0.1:9000</a>.
      You can change the default port using the <tt>--port</tt> command line
      argument to the <tt>pylith_paramviewer</tt> script.
    </p>

    <h2>Using the Parameter Viewer</h2>

    <p>
      When you point your web browser to the correct port, you should see
      the PyLith Parameter Viewer as shown below:
      <img src="figs/paramgui_startup.png" width="720px"
	   alt="Screenshot of application at startup" border="1px" />
      </p>

    <p>
      Click the <tt>Choose File</tt> button and navigate to the desired JSON
      parameter file. The viewer tarball includes a sample parameter file
      <tt>sample_parameters.json</tt>.
    </p>
    
    <p>
      Click the <tt>Reload</tt> button to reload the same JSON parameter file if
      you regenerate it. To select a new JSON parameter file, click the
      <tt>Choose File</tt> button and navigate to the desired file.
    </p>

    <h3>Version Information</h3>

    <p>
      Click on the <tt>Version</tt> tab to examine the version information.
      This tab displays the same version information shown with the
      <tt>--version</tt> command line argument to <tt>pylith</tt> in
      an easy to read layout.  This includes information about the platform
      on which <tt>pylith</tt> or <tt>pylithinfo</tt> was run, the
      PyLith version, and versions of the dependencies, as shown
      below:
      <img src="figs/paramgui_version.png" width="720px"
	   alt="Screenshot of Version tab" border="1px" />
    </p>

    <h3>Parameter Information</h3>

    <p>
      Click on the <tt>Parameters</tt> tab to examine the hiearchy of
      components and the parameters for each. You can expand/collapse the
      Component Hierarchy tree in the left panel by clicking on the
      triangles or facility name in blue to the left of the equals sign as
      shown below
      <img src="figs/paramgui_parameters.png" width="720px"
	   alt="Screenshot of Parameters tab before selecting a
      facility in the left panel" border="1px" />
    </p>

    <p>
      Clicking on the component in red to the right of the equals sign will
      show its parameters in the right panel as shown below:
      <img src="figs/paramgui_detail.png" width="720px"
	   alt="Screenshot of Parameters tab with the <tt>z_neg</tt>
      facility selected" border="1px" />
    </p>

    <p>
      The selected facility in the left panel whose parameters are shown in
      the right panel will be highlighted via a gray background.
    </p>
